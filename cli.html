<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>EcoData Retriever by weecology</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="wrapper">
      <header>
        <h1 class="header"><a href="index.html">EcoData Retriever</a></h1>
        <p class="header">Download and Install Ecological Datasets</p>

        <ul>
          <li class="download"><a class="buttons" href="https://s3.amazonaws.com/ecodata-retriever/retriever.exe">Windows</a></li>
          <li class="download"><a class="buttons" href="https://s3.amazonaws.com/ecodata-retriever/python-retriever_1.5-1_all.deb">Ubuntu/Debian</a></li>
          <li class="download"><a class="buttons" href="https://s3.amazonaws.com/ecodata-retriever/retriever-src.tar.gz">Source</a></li>
          <li><a class="buttons github" href="https://github.com/weecology/retriever">View On GitHub</a></li>
        </ul>
        
        <h1 class="header" style='font-size:1.4em'><b>Documentation</b></h1>

        <ul>
          <li><a href="getting_started.html">Getting Started</a></li>
          <li><a href="cli.html">Command Line</a></li>
          <li><a href="scripting.html">Adding Datasets</a></li>
        </ul>

        <p class="header">A <a class="header name" href="https://github.com/weecology">weecology</a> production.</p>


      </header>
      
      
      <section>
        <h2>Using the Command Line Interface</h2>
        <p>The Retriever includes a command line interface to allow its capabilities to be integrated into scientific workflows involving non-Python programming languages. For example, the Retriever can easily be called from R (or run as part of a pipe workflow including R) to automate the downloading and installing of databases necessary for analysis. This also makes it easier to use in batch processes or on servers that don't have graphical capabilities.</p>
        <p>After installing, run <code>retriever update</code> to download all of the available dataset scripts. To see the full list of command line options and datasets run <code>retriever --help</code>. The output will look like this:</p>
        <pre>
usage: retriever [-h] [-v] {install,update,gui,new,ls,help} ...

positional arguments:
  {install,update,gui,new,ls,help}
                        sub-command help
    install             download and install dataset
    update              download updated versions of scripts
    gui                 launch retriever in graphical mode
    new                 create a new sample retriever script
    ls                  display a list all available dataset scripts
    help

optional arguments:
  -h, --help            show this help message and exit
  -v, --version         show program's version number and exit</pre>

        <h4>Standard Usage</h4>
        <p>To get the most recent versions of the data set scripts, run <code>retriever update</code></p>
        <p>To install datasets, use <code>retriever install</code>:</p>
        <pre>
usage: retriever install [-h] [-e ENGINE] [-u [USER]] [-p [PASSWORD]]
                         [--host [HOST]] [-o [PORT]] [-d [DB]] [-f [FILE]]
                         [--compile] [--debug]
                         [dataset]

positional arguments:
  dataset               dataset name

optional arguments:
  -h, --help            show this help message and exit
  -e ENGINE, --engine ENGINE
                        engine (m=MySQL, p=PostgreSQL, s=SQLite, a=Microsoft
                        Access, c=CSV)
  -u [USER], --user [USER]
                        username for database connection, if applicable
  -p [PASSWORD], --password [PASSWORD]
                        password for database connection, if applicable
  --host [HOST]         host for engine, if applicable
  -o [PORT], --port [PORT]
                        port for engine, if applicable
  -d [DB], --db [DB]    database for engine, if applicable
  -f [FILE], --file [FILE]
                        file for engine, if applicable
  --compile             force re-compile of script before downloading
  --debug               run in debug mode</pre>
        <p>For example, to install the Breeding Bird Survey data into an sqlite database named mydatabase.db you would use:</p>
        <pre>
retriever install BBS -e s -f mydatabase.db</pre>
        <p>You will be prompted for any necessary connection information that is not provided.</p>
        <p>To download all data for a given category (such as all data related to BIRDS), you can use:</p>
        <pre>
retriever install birds -e s -f mydatabase.db</pre>
        <p>This is the same as <code>retriever install ___</code> for every dataset with the BIRDS tag.</p>
        
        <h3>Using the Command Line Interface from inside R</h3>
        <p>Because we have a command line interface, using the EcoData Retriever with languages other than the one it is written in is easy. Using the Retriever from inside of R just requires the use of the <code>system()</code> function and your preferred approach for importing data.</p>
        <h4>Basics  (Linux and Installations from Source)</h4>
        <p>In the simplest case, if you wanted to import the Gentry Forest Transect Data the following command from inside of R will download the data, convert it to a useable form, save it as comma delimited text files.</p>
        <pre>
system("retriever install Gentry -e c")
</pre>
        <p>Then you can simply import the resulting files in the usual manner.</p>
<pre>
count_data <- read.csv("Gentry_counts.csv")
stem_data <- read.csv("Gentry_stems.csv")
species_data <- read.csv("Gentry_species.csv")
sites_data <- read.csv("Gentry_sites.csv")
</pre>
       <p>Alternatively you can use a modified version of the <code>system()</code> function to import into to the other database management systems and then interact with them through packages like <a href="http://cran.r-project.org/web/packages/RSQLite/index.html">RSQLite</a> and <a href="http://cran.r-project.org/web/packages/RMySQL/index.html">RMySQL</a></p>
       <h4>Windows</h4>
       <p>On Windows it is necessary for the working directory to be set to the location of the retriever.exe file so that R knows where the Retriever is located. So, if I placed the Retriever on my Desktop I would use the commands:</p>
       <pre>
setwd("C:\Users\ethan\Desktop")
system("retriever install Gentry -e c")
</pre>
<p>If you put a copy of the Retriever in the working directory for the project then setting the working directory manually is not necessary.</p>
         
         
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
		
  </body>
</html>
